!function(){"use strict";class t{constructor(t){this.element=t,this.options={threshold:.2,autoHide:!1},this.scrollPosition=0,this.lastScrollPosition=0,this.html=document.documentElement,this.init(),this.initNavMobile()}init(){this.setOptions(),window.addEventListener("scroll",this.onScroll.bind(this))}setOptions(){"threshold"in this.element.dataset&&(this.options.threshold=parseFloat(this.element.dataset.threshold)),"autoHide"in this.element.dataset&&(this.options.autoHide=!0)}onScroll(){this.lastScrollPosition=this.scrollPosition,this.scrollPosition=document.scrollingElement.scrollTop,this.setHeaderState(),this.setDirections()}setHeaderState(){this.scrollPosition>document.scrollingElement.scrollHeight*this.options.threshold?(this.html.classList.add("header-is-hidden"),1==this.options.autoHide&&(console.log("allo"),this.html.classList.remove("header-is-hidden"))):this.html.classList.remove("header-is-hidden")}setDirections(){this.scrollPosition>=this.lastScrollPosition?(this.html.classList.add("is-scrolling-down"),this.html.classList.remove("is-scrolling-up")):(this.html.classList.remove("is-scrolling-down"),this.html.classList.add("is-scrolling-up"))}initNavMobile(){this.element.querySelector(".js-toggle").addEventListener("click",this.onToggleNav.bind(this))}onToggleNav(t){this.html.classList.toggle("nav-is-active")}}class e{constructor(t){this.element=t,this.videoContainer=this.element.querySelector(".js-youtube"),this.poster=this.element.querySelector(".js-poster"),this.videoId=this.element.dataset.videoId,this.autoplay=this.poster?1:0,this.playerReady=!1,this.options={noControls:1,rel:1},e.instances.push(this),this.videoId?e.loadScript():console.log("Vous devez spÃ©cifier un id")}static loadScript(){if(!e.scriptIsLoading){e.scriptIsLoading=!0;const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t)}}init(){this.setOptions(),this.initPlayer=this.initPlayer.bind(this),this.poster?this.element.addEventListener("click",this.initPlayer.bind(this)):thi.initPlayer()}setOptions(){"noControls"in this.element.dataset&&(this.options.noControls=0),"rel"in this.element.dataset&&(this.options.rel=0)}initPlayer(t){t&&this.element.removeEventListener("click",this.initPlayer),this.player=new YT.Player(this.videoContainer,{height:"100%",width:"100%",videoId:this.videoId,playerVars:{rel:this.options.rel,controls:this.options.noControls,autoplay:this.autoplay},events:{onReady:()=>{this.playerReady=!0,new IntersectionObserver(this.watch.bind(this),{rootMargin:"0px 0px 0px 0px"}).observe(this.element)},onStateChange:t=>{t.data==YT.PlayerState.PLAYING?e.pauseAll(this):t.data==YT.PlayerState.ENDED&&(this.player.seekTo(0),this.player.pauseVideo())}}})}watch(t){this.playerReady&&!t[0].isIntersecting&&this.player.pauseVideo()}static initAll(){document.documentElement.classList.add("is-video-ready");for(let t=0;t<e.instances.length;t++)e.instances[t].init()}static pauseAll(t){for(let s=0;s<e.instances.length;s++){const i=e.instances[s];i.playerReady&&i!==t&&i.player.pauseVideo()}}}e.instances=[],window.onYouTubeIframeAPIReady=e.initAll;class s{constructor(t){this.element=t,this.formElements=this.element.elements,this.html=document.documentElement,this.init()}init(){this.element.setAttribute("novalidate","");for(let t=0;t<this.formElements.length;t++){const e=this.formElements[t];e.required&&e.addEventListener("input",this.validateInput.bind(this))}this.element.addEventListener("submit",this.onSubmit.bind(this))}onSubmit(t){t.preventDefault(),console.log("submit"),this.validate()?(console.log("sucess"),this.showConfirmation()):console.log("fail")}validate(){console.log("validate");let t=!0;for(let e=0;e<this.formElements.length;e++){const s=this.formElements[e];s.required&&!this.validateInput(s)&&(t=!1)}return t}validateInput(t){const e=t.currentTarget||t;return e.validity.valid?this.removeError(e):this.addError(e),e.validity.valid}addError(t){(t.closest("[data-input-container]")||t.closest(".input")).classList.add("error")}removeError(t){console.log("yo"),(t.closest("[data-input-container]")||t.closest(".input")).classList.remove("error")}showConfirmation(){this.element.classList.add("is-sent")}}class i{constructor(){this.componentInstances=[],this.componentList={Header:t,Form:s,Youtube:e},this.init()}init(){const t=document.querySelectorAll("[data-component]");for(let e=0;e<t.length;e++){const s=t[e],i=s.dataset.component;if(this.componentList[i]){const t=new this.componentList[i](s);this.componentInstances.push(t)}else console.log(`La composante ${i} n'existe pas`)}}}class o{static load(t){t=t||"assets/icons.svg",fetch(t).then((t=>{if(t.ok)return t.text();throw new Error("Le fichier icons est introuvable.")})).then((t=>{const e=document.createElement("div");e.style.display="none",e.innerHTML=t,document.body.appendChild(e)})).catch((t=>{console.log(`Une erreur est survenur : ${t.message}`)}))}}new class{constructor(){this.init()}init(){document.documentElement.classList.add("has-js"),new i,o.load()}}}();